### 프로그램

프로그램이란, 파일이 저장 장치에 저장되어 있지만 메모리에는 올라가지 않은 정적인 상태를 말한다.

즉, `메모리에 올라가지 않은 상태`이기 때문에 아직 운영체제로부터 독립적인 메모리 공간을 할당받지 않은 상태이며

`정적인 상태`이기 때문에 아직 실행되지 않고 가만히 있는 상태이다. 

즉, 그냥 코드 덩어리 이다.

#

### 프로세스

프로세스란, 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램이다.

컴퓨터에서 실행되고 있다는 것은 운영체제로부터 **독립적인 메모리 공간**을 할당받았다는 것이며, 

실행되고 있기 때문에 **동적인 상태**이다.

####

- 운영체제로 부터 독립적인 메모리 공간을 할당받는 프로세스

![process](/img/computer_architecture_and_OS/process_and_thread/process.png)



- 각각의 영역에 대한 설명
  - Code : 코드 자체를 구성하는 메모리 영역 (프로그램 명령)
  - Data : 전역 변수, 정적 변수, 배열 등의 데이터 (초기화된 데이터)
  - Stack : 지역 변수, 매개 변수, 리턴 값 등의 임시 데이터 (임시 메모리 영역)
  - Heap : 동적 할당 시 사용 (new(), malloc() 등)



- 프로그램 -> 프로세스

  즉, **프로그램**은 코드 덩어리 파일이며 이 프로그램을 실행한 것이 바로 **프로세스** 이다.

  그림으로 표현하면 다음과 같다.![programtoprocess](/img/computer_architecture_and_OS/process_and_thread/programtoprocess.png)

- 프로세스의 특징

  - 프로세스는 각각 독립된 메모리 영역(Code, Data, Stack, Heap)을 가진다.
  - 프로세스당 최소 1개의 스레드(메인 스레드)를 가지고 있다.
  - 각각의 프로세스는 별도의 주소 공간에서 실행되고, 기본적으로 서로 다른 프로세스의 자원에 접근할 수 없다. (운영체제에서 안전성을 위해 이렇게 설계됨)
  - 다른 프로세스의 자원에 접근하기 위해서는 프로세스 간 통신(IPC)을 이용해야 한다.

####

### 스레드

스레드란, **프로세스 내에서 실행되는 여러 흐름의 단위** 이다.

즉, 프로세스의 특정한 수행 경로이며, 프로세스가 할당받은 자원을 이용하는 실행의 단위 이다.



- 프로세스 내에서 Stack만 따로 할당받고, Code, Data, Heap영역은 공유하는 스레드

![thread](/img/computer_architecture_and_OS/process_and_thread/thread.png)

스레드는 프로세스의 공유적인 한계점을 극복하기 위해 만들어진 개념이기 때문에, 프로세스와는 달리 서로 메모리를 공유한다.

즉, 스레드 끼리는 프로세스의 자원을 공유하며 프로세스 실행 흐름의 일부가 되는 것이다.



- 스레드의 특징
  - 스레드는 프로세스 내에서 Stack만 각각 따로 할당받고 Code, Data, Heap 영역은 공유한다.
  - 프로세스 내의 주소 공간이나 자원들을 같은 프로세스 내의 스레드 끼리 서로 공유한다.
  - 한 스레드가 프로세스 자원을 변경하면, 다른 스레드(Sibling Thread)도 그 변경된 결과를 즉시 볼 수 있다.



지금까지 살펴본 프로그램과 프로세스와 스레드의 개념을 코드에 비유하자면

> 프로그램은 아직 실행되지 않은 실행 파일로써 코드 덩어리라고 볼 수 있고,
>
> 프로세스는 이러한 프로그램(코드 덩어리)을 실행한 것 이라고 볼 수 있고,
>
> 스레드는 이 코드의 일부분(main문, 함수 등) 으로 볼 수 있다.

###

### 멀티 프로세스

하나의 응용프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나 이상의 작업을 동시에 처리하도록 하는 것이다.

쉽게 말하면, 하나의 컴퓨터에 여러개의 CPU가 장착되어 하나 이상의 프로세스들을 동시에 처리(병렬 처리) 하는 개념이다.

- 장점
  - 독립된 구조이기 때문에 안전성이 높다.
  - 프로세스 중 하나의 프로세스에 문제가 생겨도, 다른 프로세스에는 영향을 주지 않는다.
- 단점
  - 독립된 구조이기 때문에 Context Switching으로 인한 오버헤드가 발생하여 성능저하가 발생한다.
  - 프로세느는 각각의 독립된 메모리 영역을 할당받기 때문에 프로세스 끼리 공유하는 메모리가 없으므로, Context Switching 과정에서 캐시 메모리 초기화 등의 무거운 작업이 진행된다.

####

### 멀티 스레드

하나의 프로세스를 여러 스레드로 자원을 공유하며 작업을 나누어 수행하는 것이다.

윈도우나 리눅스 등의 운영체제들이 멀티 프로세싱을 지원하고 있으며, 멀티 스레딩을 기본으로 하고 있다.

- 장점

  - 시스템 자원소모 감소(자원의 효율성 증대) 

    프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리

  - 시스템 처리율 향상(처리비용 감소)

    스레드 간 데이터를 주고 받는 것이 간단하며, Context Switching이 빠름

  - 간단한 통신방법으로 인한 프로그램 응답 시간 빠름

    스레드는 프로세스 내의 Stack영역을 제외한 메모리 공간을 공유하기 때문에 통신이 빠름

- 단점

  - 자원 공유시, 잘못된 변수 공유나 미묘한 시간차로 인한 오류 발생 가능
  - 동기화 문제로 인한 데드락(병목 현상) 발생 가능
  - 하나의 스레드에 문제가 생기면 프로세스 전체에 영향을 줌
  - 디버깅이 어려우며 주의 깊은 설계가 필요함

####

### 면접 예상 질문

- 프로세스와 스레드의 차이점에 대해 설명해주세요
- 멀티프로세스와 멀티스레드의 차이점에 대해 설명해주세요
- 멀티스레드의 단점은 무엇인가요?

####

### 참고 자료

- [raejoonee님 블로그](https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)
- [heejeong Kwon님 블로그](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)
- [Henry Yoon님 블로그](https://wooody92.github.io/os/%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EB%A9%80%ED%8B%B0-%EC%8A%A4%EB%A0%88%EB%93%9C/)


### 기여자

<td align="center"><a href="http://hongcoding.tistory.com"><img src="https://avatars.githubusercontent.com/u/46186664?v=4?s=100" width="100px;" alt=""/><br /><sub><b>HongEunho</b></sub></a><br /><a href="#platform-HongEunho" title="Packaging/porting to new platform">📦</a></td>